# Unit1
## 異常檢測模型
1. 輸入數據
    1. log紀錄數據
        1. 例如CIC IDS 2017
        2. 需要預分析數據處理
    2. 輸入數據類型
        1. 二元
        2. 分類
        3. 連續
        4. 混合數據, 例如關係圖
    3. 數據標籤
        1. 有監督: 標籤正常和異常數據, 通常正常數據會遠大於異常數據, 需要使用類似稀有數據挖掘
        2. 半監督: 標籤正常數據, 其餘為異常
        3. 無監督: 沒有標籤, 假設正常數據會遠大於異常數據
2. 異常檢測分類
    1. 點異常
    2. 上下文異常: 可以是單點與其前後點
    3. 集體異常: 是一段序列
3. 異常檢測輸出
    1. 標籤: 多用於基於分類方法
    2. 分數: 需要一個閾值
4. 異常檢測評估
    1. 準確度並非有效指標, 因為正常數據遠大於異常數據
    2. 使用F度量
### 24:40有相關指標的計算公式
5. 基於分類技術
    1. 有監督: 有效檢測已知異常, 但需要異常標籤, 且可能無法檢測全新異常
    2. 半監督: 學習已知正常行為, 但可能會造成高誤報率
6. 有監督學習下處理異常稀少
    1. 欠採樣: 只抽取部分正常數據, 使得正常數據和異常數據數量接近, 會丟失部分數據
    2. 過採量: 複製異常數據, 會增加計算成本
    3. 生成人工數據
        1. SMOTE合成少數類過採樣: 生成相似的數據而非直接複製
        2. 稀疏區域邊緣生成: 連接稀少數據產生邊緣, 在邊緣附近生成
        3. 主動學習
7. 入侵檢測
    1. 檢測CIA
    2. 傳統基於已知特徵, 但部署新特徵會有延遲
    3. 有監督學習和傳統檢測類似, 所以多使用半監督學習

## 機器學習基礎
1. IDS入侵檢測系統
    1. 基於mis-use不當使用: 使用簽名識別已知攻擊
    2. 基於異常: 識別典型行為和異常, 基於統計
2. 分類器算法
    1. 樸素貝葉斯
    2. k最近鄰
    3. SVM支持向量機
    4. ANN人工神經網路
3. SVM
    1. 使用有監督學習
    2. 透過線性超平面進行分類
4. ANN
    1. 輸入, 輸出, 權重更新, 形成模型
    2. 有標籤, 半標籤, 無標籤

## FNN前饋神經網路
1. 輸入: WX+b
2. Φ激活函數: 將線性函數轉為非線性函數, 使騎在反向傳播時可微
3. 常用激活函數
    1. Sigmoid ∈ [0, 1], 可能會出現梯度消失, 難以收斂
    2. Tanh ∈ [-1, 1], 可能會出現梯度消失, 難以收斂
    3. ReLu: 可以帶leak洩漏, 小於零時斜率為負數
4. b偏差
    1. 如同線性函數的截距
    2. 如果沒有偏差, 所有線定會通過一個點
    3. 有偏差可以使數據更好的擬合
5. 訓練過程
    1. Φ(WX+b) = y^
    2. 代價函數/損失函數 c = 1/2((y - y^)^2)
    3. 反向傳播調整W權重, 使得c小於某閾值
6. 梯度下降
    1. 權重篇導小於零, 加大權重
    2. 權重篇導大於零, 減少權重
    3. 直到找到最小點
7. 梯度下降更新權重過程
    1. 權重隨機初始化為接近零的小數
    2. 輸入, 進行前向傳播得到結果
    3. 和實際結果比較產生誤差
    4. 反向傳播更新權重
    5. 重複更新權重: 每次更新權重或批量更新
    6. 全部數據通過完成一輪訓練, 多需要多Epoch輪訓練

## FNN 數值示例
1. 一個簡單網路
    1. 輸入: x1, x2, b1
    2. 全聯接隱藏層, h1, h2, b2
        1. h1 = x1w1 + x2w2 +b1
        2. h2 = x1w3 + x2w4 +b1
        3. 激活函數Sigmoid產生outH1, outH2
    3. 全聯接輸出 y1, y2
        1. y1 = outH1w5 + outH2w6 + b2
        2. y2 = outH1w7 + outH2w8 + b2
        3. 激活函數Sigmoid產生outY1, outY2
    4. 誤差函數∑1/2((y - y^)^2)
### 數值運算參考影片05:40


## 課程使用案例
1. NSL-KDD 數據集
    1. 包含攻擊
        1. DOS: 拒絕服務
        2. R2L: 遠程未經授權訪問
        3. U2R: 本地root
        4. probe: 探測/掃描
### 數據集參數02:16
2. 推薦使用的python包
    1. anaconda: 管理系統
    2. pandas: 數據結構和分析, 讀取csv
    3. numpy: 數字處理
    4. Keras: 深度學習
    5. Spyder: GUI
3. 訓練程序
    1. 加載文件
    2. 數據預處理
    3. 建立神經網路
        1. 神經元, 網路層, 激活函數, 損失函數
        2. 批大小, 總輪數, 閾值
    4. 訓練和測試
    5. 展示結果
        1. 準確度, 混淆矩陣
4. 詳細櫻參照實驗要求
